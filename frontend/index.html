<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentorix ‚Äî AI Math Tutor</title>
    <meta name="description"
        content="Mentorix: Your personal AI tutor for Class 10 CBSE Mathematics. Adaptive learning, dynamic pacing, NCERT-grounded content.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="./styles.css">
</head>

<body>

    <!-- AUTH GATE -->
    <div id="auth-gate" class="auth-gate">
        <div class="auth-container">
            <div class="auth-brand">
                <div class="brand-icon">üìê</div>
                <h1>Mentorix</h1>
                <p class="brand-tagline">Your AI Math Tutor ‚Ä¢ Class 10 CBSE</p>
            </div>

            <!-- LOGIN PANEL -->
            <div id="panel-login" class="auth-panel">
                <h2>Welcome Back</h2>
                <form id="form-login" autocomplete="off">
                    <div class="form-group">
                        <label for="login-username">Username</label>
                        <input type="text" id="login-username" placeholder="Enter your username" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password" required>
                    </div>
                    <div class="form-group form-group--muted">
                        <label for="api-base-url">API URL <span class="label-optional">(optional)</span></label>
                        <input type="text" id="api-base-url" placeholder="http://localhost:8000"
                            value="http://localhost:8000">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Log In</button>
                </form>
                <p class="auth-switch">New here? <a href="#" id="link-to-signup">Create an account</a></p>
                <div id="login-error" class="error-msg hidden"></div>
            </div>

            <!-- SIGNUP PANEL -->
            <div id="panel-signup" class="auth-panel hidden">
                <h2>Create Your Account</h2>
                <form id="form-signup" autocomplete="off">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="signup-name">Full Name</label>
                            <input type="text" id="signup-name" placeholder="Your full name" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-username">Username</label>
                            <input type="text" id="signup-username" placeholder="Choose a username" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="signup-password">Password</label>
                            <input type="password" id="signup-password" placeholder="Choose a password" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-dob">Date of Birth</label>
                            <input type="date" id="signup-dob" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="signup-math9">Class 9 Maths %</label>
                            <input type="number" id="signup-math9" min="0" max="100" placeholder="e.g. 75" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-weeks">Weeks to Complete</label>
                            <select id="signup-weeks" required>
                                <option value="" disabled selected>Select weeks</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group form-group--muted">
                        <label for="api-base-url-signup">API URL <span class="label-optional">(optional)</span></label>
                        <input type="text" id="api-base-url-signup" placeholder="http://localhost:8000"
                            value="http://localhost:8000">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Sign Up & Take Test</button>
                </form>
                <p class="auth-switch">Already have an account? <a href="#" id="link-to-login">Log in</a></p>
                <div id="signup-error" class="error-msg hidden"></div>
            </div>

            <!-- DIAGNOSTIC TEST PANEL -->
            <div id="panel-diagnostic" class="auth-panel hidden">
                <div class="test-header">
                    <h2>üìù Diagnostic Test</h2>
                    <div class="test-timer" id="test-timer">30:00</div>
                </div>
                <p class="test-subtitle">Answer all 25 questions. This helps us personalize your learning plan.</p>
                <div id="test-progress" class="test-progress">
                    <span id="test-answered">0</span>/25 answered
                </div>
                <div id="test-questions" class="test-questions"></div>
                <button id="btn-submit-test" class="btn btn-primary btn-full" disabled>Submit Test</button>
            </div>

            <!-- RESULT PANEL -->
            <div id="panel-result" class="auth-panel hidden">
                <h2>üìä Your Results</h2>
                <div id="result-content" class="result-content"></div>
                <button id="btn-go-dashboard" class="btn btn-primary btn-full">Go to Dashboard ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <main id="app-main" class="hidden">
        <!-- TOP NAV -->
        <nav class="top-nav">
            <div class="nav-brand">
                <span class="nav-icon">üìê</span>
                <span class="nav-title">Mentorix</span>
            </div>
            <div class="nav-right">
                <span id="nav-student-name" class="nav-student"></span>
                <button id="btn-logout" class="btn btn-sm btn-outline">Logout</button>
            </div>
        </nav>

        <!-- DASHBOARD -->
        <div id="screen-dashboard" class="screen">
            <!-- Profile Summary Card -->
            <div class="profile-card" id="profile-card"></div>

            <!-- Current Week Tasks -->
            <section class="section" id="section-tasks">
                <h2 class="section-title">üìã This Week's Tasks</h2>
                <div id="current-tasks" class="tasks-grid"></div>
            </section>

            <!-- Completion Status -->
            <section class="section" id="section-completion">
                <h2 class="section-title">üìö Chapter Completion</h2>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="completion-bar"><span></span></div>
                    <span class="progress-label" id="completion-label">0%</span>
                </div>
                <div id="chapters-grid" class="chapters-grid"></div>
            </section>

            <!-- Accuracy & Confidence -->
            <section class="section" id="section-confidence">
                <h2 class="section-title">üéØ Accuracy & Mastery</h2>
                <div
                    style="background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:16px">
                    <canvas id="confidence-chart" height="200"></canvas>
                </div>
                <div id="confidence-trend" style="color:var(--text-muted);font-size:0.9rem;margin-bottom:10px"></div>
                <div id="confidence-grid" class="confidence-grid"></div>
            </section>

            <!-- Rough Plan -->
            <section class="section" id="section-plan">
                <h2 class="section-title">üóìÔ∏è Learning Roadmap</h2>
                <div id="plan-timeline" class="plan-timeline"></div>
            </section>

            <section class="section" id="section-plan-history">
                <h2 class="section-title">üßæ Plan History</h2>
                <div id="plan-history-list" class="revision-list"></div>
            </section>

            <!-- Revision Queue -->
            <section class="section hidden" id="section-revision">
                <h2 class="section-title">üîÑ Revision Queue</h2>
                <div id="revision-list" class="revision-list"></div>
            </section>
        </div>

        <!-- READING SCREEN -->
        <div id="screen-reading" class="screen hidden">
            <button class="btn btn-sm btn-outline btn-back" id="btn-back-from-reading">‚Üê Back to Dashboard</button>
            <div class="reading-header">
                <h2 id="reading-chapter-title"></h2>
                <div class="reading-timer" id="reading-timer">Time: 0:00</div>
            </div>
            <div id="reading-content" class="reading-content"></div>
            <div id="reading-status" class="reading-status"></div>
        </div>

        <!-- TEST SCREEN -->
        <div id="screen-test" class="screen hidden">
            <button class="btn btn-sm btn-outline btn-back" id="btn-back-from-test">‚Üê Back to Dashboard</button>
            <div class="test-header">
                <h2 id="test-chapter-title"></h2>
                <div class="test-timer" id="chapter-test-timer">20:00</div>
            </div>
            <div id="chapter-test-questions" class="test-questions"></div>
            <button id="btn-submit-chapter-test" class="btn btn-primary btn-full" disabled>Submit Test</button>
            <div id="test-result-feedback" class="test-feedback hidden"></div>
        </div>

        <!-- PRACTICE SCREEN -->
        <div id="screen-practice" class="screen hidden">
            <button class="btn btn-sm btn-outline btn-back" id="btn-back-from-practice">‚Üê Back to Dashboard</button>
            <div class="reading-header">
                <h2 id="practice-title">üìù Practice Questions</h2>
            </div>
            <div id="practice-questions" class="test-questions"></div>
            <div style="display:flex;gap:12px;margin-top:16px">
                <button id="btn-check-practice" class="btn btn-primary" disabled>Check Answers</button>
                <button id="btn-new-practice" class="btn btn-outline">üîÑ New Questions</button>
            </div>
            <div id="practice-feedback" class="test-feedback hidden"></div>
        </div>
    </main>

    <script src="./app.js"></script>
</body>

</html>
