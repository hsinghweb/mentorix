<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mentorix MVP</title>
    <link rel="stylesheet" href="./styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous" />
  </head>
  <body>
    <div id="auth-gate" class="auth-gate">
      <div class="auth-card">
        <h1>Mentorix</h1>
        <p class="sub">Class 10 Mathematics · Login or Sign up</p>
        <div id="auth-tabs" class="tabs">
          <button type="button" class="tab active" data-auth="login">Login</button>
          <button type="button" class="tab" data-auth="signup">Sign up</button>
        </div>
        <div id="auth-login" class="auth-panel">
          <div class="row"><label for="loginUsername">Username</label><input id="loginUsername" type="text" autocomplete="username" placeholder="Your username" /></div>
          <div class="row"><label for="loginPassword">Password</label><input id="loginPassword" type="password" autocomplete="current-password" placeholder="Your password" /></div>
          <div class="row auth-api-row"><label for="authApiBase">API URL</label><input id="authApiBase" type="text" value="http://localhost:8000" placeholder="http://localhost:8000" /></div>
          <div class="row actions"><button id="loginBtn" type="button" class="primary">Login</button></div>
          <p id="authLoginError" class="auth-error hidden" role="alert"></p>
        </div>
        <div id="auth-signup" class="auth-panel hidden">
          <div class="row"><label for="signupUsername">Username</label><input id="signupUsername" type="text" autocomplete="username" placeholder="Choose a username" /></div>
          <div class="row"><label for="signupPassword">Password</label><input id="signupPassword" type="password" autocomplete="new-password" placeholder="Choose a password" /></div>
          <div class="row"><label for="signupName">Full name</label><input id="signupName" type="text" placeholder="Your full name" /></div>
          <div class="row"><label for="signupDob">Date of birth</label><input id="signupDob" type="date" /></div>
          <div class="row"><label for="signupMathPercent">Class 9 Maths % (0–100)</label><input id="signupMathPercent" type="number" min="0" max="100" value="75" /></div>
          <div class="row"><label for="signupWeeks">Weeks to complete course (14–28)</label><select id="signupWeeks"><option value="14">14 weeks</option><option value="16">16 weeks</option><option value="18">18 weeks</option><option value="20">20 weeks</option><option value="22">22 weeks</option><option value="24">24 weeks</option><option value="26">26 weeks</option><option value="28" selected>28 weeks</option></select></div>
          <div class="row actions"><button id="signupBtn" type="button" class="primary">Continue to test</button></div>
          <p id="authSignupError" class="auth-error hidden" role="alert"></p>
        </div>
        <div id="auth-diagnostic" class="auth-panel hidden">
          <h2>Diagnostic test (25 MCQs)</h2>
          <p class="muted">You have 30 minutes. Answer all questions, then submit. Your account will be created after you submit.</p>
          <p id="authDiagnosticTimer" class="auth-timer">Time left: 30:00</p>
          <div id="authQuestionsContainer" class="ob-questions"></div>
          <div class="row actions"><button id="authSubmitDiagnosticBtn" class="primary">Submit test</button></div>
          <p id="authDiagnosticError" class="auth-error hidden"></p>
        </div>
        <div id="auth-result" class="auth-panel hidden">
          <h2>Your rough plan &amp; Week 1</h2>
          <pre id="authResultPre"></pre>
          <div class="row actions"><button id="authGoDashboardBtn" class="primary">Go to my dashboard</button></div>
        </div>
      </div>
    </div>
    <main id="app-main" class="container hidden">
      <header class="dashboard-header">
        <h1>Mentorix</h1>
        <p class="sub">Class 10 Mathematics · Your dashboard</p>
        <button type="button" id="logoutBtn" class="logout-btn">Logout</button>
      </header>

      <section class="card dashboard-section">
        <h2>Current status of course completion</h2>
        <p class="muted">Chapter-wise completion including subtopics (from syllabus). Status is based on your mastery.</p>
        <div id="courseCompletionRoot" class="syllabus-root">
          <p class="muted">Loading…</p>
        </div>
      </section>

      <section class="card dashboard-section">
        <h2>Student profile — confidence &amp; accuracy</h2>
        <p class="muted">Chapter-wise (and subtopics) accuracy and confidence level from your diagnostic and study history.</p>
        <div id="profileConfidenceRoot" class="syllabus-root">
          <p class="muted">Loading…</p>
        </div>
      </section>

      <section class="card dashboard-section">
        <h2>Current schedule</h2>
        <p class="muted">All weeks with assigned tasks and timeline to complete. This schedule is assigned by Mentorix and is read-only.</p>
        <div id="scheduleRoot" class="schedule-root">
          <p class="muted">Loading…</p>
        </div>
      </section>
    </main>

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>
    <script src="./app.js"></script>
  </body>
</html>
